import Head from 'next/head';
import { gql, useQuery } from '@apollo/client';

// import { initializeApollo } from '../lib/apollo';

// TODO:
// Error: You can not use getStaticProps or getStaticPaths with getServerSideProps.
// To use SSG, please remove getServerSideProps
//
// export async function getStaticProps() {
//   const apolloClient = initializeApollo();

//   // await apolloClient.query({
//   //   query: '',
//   // })

//   return {
//     props: {
//       initialApolloState: apolloClient.cache.extract(),
//     },
//   };
// }

export default function Home(props: any) {
  const { userId } = props;

  async function logoutClicked() {
  console.log('### logoutClicked');
  }

  const { data, error } = useQuery(gql`
    query All_Pages {
      page {
        id
        name
        content
      }
    }
  `);

  console.log('### data: ', data, error);

  return (
    <div>
      <Head>
        <title>Gallery</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <h1>
          Welcome to Next.js
        </h1>

        <button type="button" onClick={logoutClicked}>
          Logout
          {userId}
        </button>
      </main>
    </div>
  );
}
